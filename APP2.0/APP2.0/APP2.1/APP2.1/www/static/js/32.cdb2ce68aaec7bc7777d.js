webpackJsonp([32],{C9p7:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a={name:"personal",data:function(){return{userInfo:{},nick:"",trueName:"",showSex:!1,columns:["男","女"],showTime:!1,currentDate:new Date,minDate:new Date(1900,1,1),showImg:!1}},mounted:function(){},created:function(){this.$comm.getStore("userInfo")?this.userInfo=this.$comm.getStore("userInfo"):this.getUser()},methods:{getUser:function(){var t=this;t.$getData.getUserInfo().then(function(e){console.log(e),1==e.data.code?(t.userInfo=e.data,t.nick=e.data.nick_name,t.trueName=e.data.true_name,t.$comm.setStore("userIno",e.data)):t.$comm.toast(decodeURIComponent(e.data.msg))}).catch(function(e){t.$comm.alertMsg(e)})},postUser:function(){var t=this,e={nick_name:t.nick,true_name:t.trueName,sex:t.sex,birthtime:t.userInfo.birthtime};t.$getData.postUserInfo(e).then(function(e){console.log(e),1==e.data.code||t.$comm.toast(decodeURIComponent(e.data.msg))}).catch(function(e){t.$comm.alertMsg(e)})},showSexPoup:function(){this.showSex=!this.showSex},sexOK:function(t,e){this.userInfo.sex=0==e?"male":"female",this.showSex=!1,console.log("当前值："+t+", 当前索引："+e)},showTimePoup:function(){this.showTime=!this.showTime},formatter:function(t){console.log(t.toLocaleDateString()),this.userInfo.birthtime=t.toLocaleDateString().replace(/\//g,"-"),this.showTime=!this.showTime},showImgPoup:function(){this.showImg=!this.showImg}}},o={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("v-header"),t._v(" "),s("div",{staticClass:"head-btn-box"},[s("button",{staticClass:"fc-green fz13",on:{click:t.postUser}},[t._v("保存")])]),t._v(" "),s("div",{staticClass:"main-box "},[s("div",{staticClass:"mb-10"}),t._v(" "),s("ul",{staticClass:"table-view bg-f"},[s("li",{staticClass:"border-buttom clearfix header_cover"},[s("span",{staticClass:"fl-l"},[t._v("头像")]),t._v(" "),s("div",{staticClass:"fl-r"},[s("div",{staticClass:"header-img",on:{click:t.showImgPoup}},[s("img",{directives:[{name:"lazy",rawName:"v-lazy",value:t.userInfo.image,expression:"userInfo.image"}],attrs:{width:"100%"}})]),s("i",{staticClass:"right-arrow"})])]),t._v(" "),s("li",{staticClass:"border-buttom clearfix"},[s("span",{staticClass:"fl-l"},[t._v("昵称")]),t._v(" "),s("span",{staticClass:"fl-r"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.nick,expression:"nick"}],attrs:{type:"text",placeholder:"未填写"},domProps:{value:t.nick},on:{input:function(e){e.target.composing||(t.nick=e.target.value)}}})])]),t._v(" "),s("li",{staticClass:"border-buttom clearfix"},[s("span",{staticClass:"fl-l"},[t._v("真实姓名")]),t._v(" "),s("span",{staticClass:"fl-r"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.trueName,expression:"trueName"}],attrs:{type:"text",placeholder:"未填写"},domProps:{value:t.trueName},on:{input:function(e){e.target.composing||(t.trueName=e.target.value)}}})])]),t._v(" "),s("li",{staticClass:"border-buttom clearfix"},[s("span",{staticClass:"fl-l"},[t._v("性别")]),t._v(" "),s("span",{staticClass:"fl-r",on:{click:t.showSexPoup}},[t._v(t._s("male"==t.userInfo.sex?"男":"女")),s("i",{staticClass:"right-arrow"})])]),t._v(" "),s("li",{staticClass:"border-buttom clearfix"},[s("span",{staticClass:"fl-l"},[t._v("生日")]),t._v(" "),s("span",{staticClass:"fl-r",on:{click:t.showTimePoup}},[t._v(t._s(t.userInfo.birthtime)),s("i",{staticClass:"right-arrow"})])]),t._v(" "),s("li",{staticClass:"border-buttom clearfix"},[s("span",{staticClass:"fl-l"},[t._v("手机号")]),t._v(" "),s("span",{staticClass:"fl-r"},[t._v(t._s(t.userInfo.telphone))])]),t._v(" "),t._m(0)])]),t._v(" "),s("van-popup",{attrs:{position:"bottom",overlay:!0},model:{value:t.showSex,callback:function(e){t.showSex=e},expression:"showSex"}},[s("van-picker",{attrs:{"show-toolbar":"",title:"请选择",columns:t.columns},on:{cancel:t.showSexPoup,confirm:t.sexOK}})],1),t._v(" "),s("van-popup",{attrs:{position:"bottom",overlay:!0},model:{value:t.showTime,callback:function(e){t.showTime=e},expression:"showTime"}},[s("van-datetime-picker",{attrs:{"min-date":t.minDate,type:"date"},on:{confirm:t.formatter,cancel:t.showTimePoup},model:{value:t.currentDate,callback:function(e){t.currentDate=e},expression:"currentDate"}})],1),t._v(" "),s("van-popup",{attrs:{position:"bottom",overlay:!0},model:{value:t.showImg,callback:function(e){t.showImg=e},expression:"showImg"}},[s("ul",{staticClass:"bg-f fz14 img-select"},[s("li",{staticClass:"border-buttom"},[t._v("拍照")]),t._v(" "),s("li",{staticClass:"border-buttom"},[t._v("从手机相册选择")]),t._v(" "),s("li",{staticClass:"border-buttom fc-9",on:{click:t.showImgPoup}},[t._v("取消")])])])],1)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("li",{staticClass:"border-buttom clearfix"},[e("span",{staticClass:"fl-l"},[this._v("修改密码")]),this._v(" "),e("span",{staticClass:"fl-r"},[e("i",{staticClass:"right-arrow"})])])}]};var i=s("VU/8")(a,o,!1,function(t){s("uCso")},"data-v-3c69fbc8",null);e.default=i.exports},uCso:function(t,e){}});
//# sourceMappingURL=32.cdb2ce68aaec7bc7777d.js.map